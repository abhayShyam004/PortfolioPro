{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ profile.name }} | {{ profile.greeting }}</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Theme Core CSS -->
    <link rel="stylesheet" href="{% static 'css/themes/interactive-3d.css' %}">
    
    <!-- Admin Configured Styles -->
    <style>
        :root {
            /* Theme Config Variables */
            --glass-opacity: {{ settings.theme_config.glass_opacity|default:'0.1' }};
            --neon-color: {{ settings.theme_config.circle_color|default:settings.primary_color|default:'#6366f1' }};
            --primary: {{ settings.primary_color|default:'#6366f1' }};
            --bg-color: {{ settings.theme_config.background_color|default:'#0a0a0f' }};
            --font-heading: '{{ settings.heading_font|default:"Space Grotesk" }}', sans-serif;
            --font-body: '{{ settings.body_font|default:"Outfit" }}', sans-serif;
        }
    </style>
</head>
<body class="theme-interactive-3d">

    <!-- [LAYER 0] Background (Vanta.js) -->
    <div id="vanta-bg" class="background-layer"></div>
    
    <!-- [LAYER 1] Ambient Particles -->
    <div class="ambient-layer">
        <div class="particle p1"></div>
        <div class="particle p2"></div>
        <div class="particle p3"></div>
    </div>

    <!-- [LAYER 10] Content Scroll Container -->
    <div class="viewport">
        <div class="z-scroll-container">
            
            <!-- SECTION: HERO (Identity Node) -->
            <section id="hero" class="z-section hero-section" data-depth="0">
                <div class="glass-card identity-node" data-tilt data-tilt-max="10" data-tilt-glare data-tilt-max-glare="0.5">
                    <div class="hologram-profile">
                        {% if profile.about_photo %}
                        <img src="{{ profile.about_photo.url }}" alt="{{ profile.name }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                        {% else %}
                        <div class="avatar-placeholder">{{ profile.name|slice:":2" }}</div>
                        {% endif %}
                    </div>
                    <h1 class="neon-text">{{ profile.name }}</h1>
                    <p class="subtitle">{{ profile.greeting }}</p>
                    <div class="status-indicator">
                        <span class="pulse"></span> ONLINE // SYSTEM READY
                    </div>
                </div>
            </section>

            <!-- SECTION: ABOUT & SKILLS (Data Log) -->
            <section id="about" class="z-section split-section" data-depth="1000">
                <div class="glass-panel bio-panel" data-tilt data-tilt-max="5">
                    <div class="panel-header">
                        <i class="fas fa-fingerprint"></i> BIO_LOG.txt
                    </div>
                    <div class="panel-content">
                        {{ profile.about_text|linebreaks }}
                    </div>
                </div>
                
                <div class="glass-panel skills-panel">
                    <div class="panel-header">
                        <i class="fas fa-microchip"></i> SKILL_MATRIX_V2
                    </div>
                    <div class="tech-cloud">
                        {% for skill in skills %}
                        <div class="tech-tag" style="--tag-color: {{ settings.secondary_color }}">
                            <span class="tag-name">{{ skill.name }}</span>
                            <span class="tag-level">{{ skill.category }}</span> 
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </section>

            <!-- SECTION: PROJECTS (Holo-deck) -->
            <section id="projects" class="z-section projects-section" data-depth="2000">
                <h2 class="section-title"><i class="fas fa-folder-open"></i> PROJECT_ARCHIVE</h2>
                <div class="holo-deck-grid">
                    {% for project in projects %}
                    <article class="project-monolith">
                        <div class="project-header">
                            <span class="category-badge">{{ project.category }}</span>
                            {% if project.project_date %}
                            <span style="font-size: 0.8rem; opacity: 0.7;">{{ project.project_date }}</span>
                            {% endif %}
                        </div>
                        <h3>{{ project.title }}</h3>
                        <div class="project-desc">
                            {{ project.description|linebreaks }}
                        </div>
                        <div class="project-actions">
                             {% if project.project_link %}
                            <a href="{{ project.project_link }}" target="_blank" class="cyber-btn_small">View Live</a>
                            {% endif %}
                            {% if project.repo_link %}
                            <a href="{{ project.repo_link }}" target="_blank" class="cyber-btn_small" style="margin-left: 10px;">Source</a>
                            {% endif %}
                        </div>
                    </article>
                    {% empty %}
                    <div class="empty-state">No projects initialized.</div>
                    {% endfor %}
                </div>
            </section>
            
            <!-- SECTION: EXPERIENCE (Chrono-log) -->
            <section id="experience" class="z-section experience-section" data-depth="3000">
                <h2 class="section-title"><i class="fas fa-history"></i> CHRONO_LOG</h2>
                <div class="timeline-track">
                    {% for job in experiences %}
                    <div class="timeline-node">
                        <div class="time-stamp">{{ job.timeframe }}</div>
                        <div class="company-name">{{ job.company }}</div>
                        <h3 style="color: #fff; margin: 0 0 10px 0;">{{ job.position }}</h3>
                        <div class="job-desc" style="color: rgba(255,255,255,0.7); line-height: 1.6;">
                            {{ job.description|linebreaks }}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </section>

            <!-- SECTION: CONTACT (Transmission Terminal) -->
            <section id="contact" class="z-section contact-section" data-depth="4000">
                <div class="terminal-ui">
                    <div class="terminal-header">
                        <span class="dot red"></span>
                        <span class="dot yellow"></span>
                        <span class="dot green"></span>
                        <span class="title">TRANSMISSION_UPLINK</span>
                    </div>
                    <div class="terminal-body">
                        <div class="contact-info">
                            <h3 style="color: #fff; margin-bottom: 20px;">{{ contact.contact_heading|default:"Establish Connection" }}</h3>
                            <div class="info-row"><i class="fas fa-envelope"></i> {{ contact.email }}</div>
                            {% if contact.phone %}<div class="info-row"><i class="fas fa-phone"></i> {{ contact.phone }}</div>{% endif %}
                        </div>
                        <div class="social-links-dock">
                            {% for link in social_links %}
                            <a href="{{ link.url }}" class="social-icon" title="{{ link.platform }}" target="_blank">
                                <i class="{{ link.icon_class }}"></i>
                            </a>
                            {% endfor %}
                        </div>
                        <div class="terminal-footer">
                            &copy; {% now "Y" %} {{ profile.name }}. System Online.
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: CONTACT (Transmission Terminal) -->
            <section id="contact" class="z-section contact-section" data-depth="4000">
                <div class="glass-card terminal-ui">
                    <div class="terminal-header">
                        <span class="dot red"></span>
                        <span class="dot yellow"></span>
                        <span class="dot green"></span>
                        <span class="title">TRANSMISSION_UPLINK</span>
                    </div>
                    <div class="terminal-body">
                        <div class="contact-info">
                            <div class="info-row"><i class="fas fa-envelope"></i> {{ contact.email }}</div>
                            {% if contact.phone %}<div class="info-row"><i class="fas fa-phone"></i> {{ contact.phone }}</div>{% endif %}
                        </div>
                        <div class="social-links-dock">
                            {% for link in social_links %}
                            <a href="{{ link.url }}" class="social-icon" title="{{ link.platform }}" target="_blank">
                                <i class="fab fa-{{ link.platform }}"></i>
                            </a>
                            {% endfor %}
                        </div>
                        <!-- Simple Footer inside Terminal -->
                        <div class="terminal-footer">
                            &copy; 2025 {{ profile.name }}. System Online.
                        </div>
                    </div>
                </div>
            </section>
            
        </div>
    </div>

    <!-- [LAYER 100] HUD Navigation (Command Dock) -->
    <nav class="hud-dock">
        <div class="dock-container">
            <a href="#hero" class="dock-item active" data-target="hero" title="Identity">
                <i class="fas fa-user-circle"></i>
            </a>
            <a href="#about" class="dock-item" data-target="about" title="Bio & Skills">
                <i class="fas fa-info-circle"></i>
            </a>
            <a href="#projects" class="dock-item" data-target="projects" title="Projects">
                <i class="fas fa-code-branch"></i>
            </a>
            <a href="#experience" class="dock-item" data-target="experience" title="Timeline">
                <i class="fas fa-layer-group"></i>
            </a>
            <a href="#contact" class="dock-item" data-target="contact" title="Transmission">
                <i class="fas fa-satellite-dish"></i>
            </a>
            {% if user.is_authenticated %}
            <div class="separator"></div>
            <a href="/admin-panel/" class="dock-item admin-link" title="System Config">
                <i class="fas fa-cog"></i>
            </a>
            {% endif %}
        </div>
    </nav>
    
    <!-- Mobile FAB Trigger -->
    <div class="mobile-fab">
        <i class="fas fa-bars"></i>
    </div>

    <!-- Scripts -->
    <script src="{% static 'js/vendor/three.min.js' %}"></script>
    <script src="{% static 'js/vendor/vanta.net.min.js' %}"></script> <!-- Default to Net, configurable later -->
    <script src="{% static 'js/vendor/vanilla-tilt.min.js' %}"></script>
    <script src="{% static 'js/themes/interactive-3d.js' %}"></script>

</body>
</html>
